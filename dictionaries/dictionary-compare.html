<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>5</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style>
  <!--

  /* RESET
  =============================================================================*/

  html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, 
      abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, 
      strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, 
      legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, 
      embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, 
      section, summary, time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
  }

  /* BODY
  =============================================================================*/

  body {
    font-family: Arimo, Nunito Sans, arial, clean, sans-serif;
    font-size: 16px;
    line-height: 1.5;  /* межстрочное */
    color: #333;
    background-color: #fff;
    padding: 20px;
    max-width: 42em; /* ширина текста */
    margin: 0 auto;
  }

  body>*:first-child {
    margin-top: 0 !important;
  }

  body>*:last-child {
    margin-bottom: 0 !important;
  }

  /* BLOCKS
  =============================================================================*/

  p, blockquote, ul, ol, dl, table, pre {
    margin: 0.4em 0; /* между абзацами (кроме первого и последнего) */
  }

  /* HEADERS
  =============================================================================*/

  h1, h2, h3, h4, h5, h6 {
    margin: 20px 0 10px;
    padding: 0;
    font-family: Opinion Pro, Neucha;
    font-weight: bold;
    -webkit-font-smoothing: antialiased;
    text-shadow: 0px 0px 10px rgb(0 0 0 / 25%);
  }

  h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
    font-size: 1em;
  }

  h1 {
    font-size: 1.8em;
    /*color: #000;*/
  }

  h2 {
    font-size: 1.5em;
    border-bottom: 1px solid #ccc;
    /*color: #000;*/
  }

  h3 {
    font-size: 1.3em;
  }

  h4 {
    font-size: 1.1em;
  }

  h5 {
    font-size: 1.1em;
  }

  h6 {
    /*color: #777;*/
    font-size: 1.0em;
  }

  body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
    margin-top: 0;
    padding-top: 0;
  }

  a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
  }

  h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
    margin-top: 10px;
  }

  /* LINKS
  =============================================================================*/

  a {
    color: #4183C4;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  /* LISTS
  =============================================================================*/

  ul, ol {
    padding-left: 30px;
  }

  ul li > :first-child, 
  ol li > :first-child, 
  ul li ul:first-of-type, 
  ol li ol:first-of-type, 
  ul li ol:first-of-type, 
  ol li ul:first-of-type {
    margin-top: 0px;
  }

  ul ul, ul ol, ol ol, ol ul {
    margin-bottom: 0;
  }

  dl {
    padding: 0;
  }

  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px;
  }

  dl dt:first-child {
    padding: 0;
  }

  dl dt>:first-child {
    margin-top: 0px;
  }

  dl dt>:last-child {
    margin-bottom: 0px;
  }

  dl dd {
    margin: 0 0 15px;
    padding: 0 15px;
  }

  dl dd>:first-child {
    margin-top: 0px;
  }

  dl dd>:last-child {
    margin-bottom: 0px;
  }

  /* CODE
  =============================================================================*/

  pre, code, tt {
    font-size: 1rem;
    font-family: Iosevka, Consolas, "Liberation Mono", Courier, monospace;
  }

  code, tt {
    margin: 0 0px;
    padding: 1px 3px;
    white-space: nowrap;
    border: 1px solid #eaeaea;
  /*   background-color: #f8f8f8; это `code` */
    background-color: #EFFFEF;
    border-radius: 3px;
  }

  pre>code {
    margin: 0;
    padding: 0;
    white-space: pre;
    border: none;
    background: transparent; 
  }

  .sourceCode{
    background-color: #F6FFF7; /* светло-зелен для блоков кода */
    font-size: 100%;
  }
    div.sourceCode{
       box-shadow: 0px 0px 15px rgb(0 0 0 / 7%);
    }

  pre {
  /*   background-color: #f8f8f8; это ``` */
    border: 1px solid #ccc;
    font-size: 14px;
    line-height: 19px;
    overflow: auto;
    padding: 6px 8px;
    border-radius: 3px;
  }

  pre code, pre tt {
    background-color: transparent; 
    border: none;
  }

  kbd {
      -moz-border-bottom-colors: none;
      -moz-border-left-colors: none;
      -moz-border-right-colors: none;
      -moz-border-top-colors: none;
      background-color: #DDDDDD;
      background-image: linear-gradient(#F1F1F1, #DDDDDD);
      background-repeat: repeat-x;
      border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
      border-image: none;
      border-radius: 2px 2px 2px 2px;
      border-style: solid;
      border-width: 1px;
      font-family: Iosevka, Helvetica, Arial, sans-serif;
      line-height: 10px;
      padding: 1px 4px;
      box-shadow: 0 1px 0 rgba(63,63,63,0.25);
  }

  /* QUOTES
  =============================================================================*/

  blockquote {
    border-left: 4px solid #DDD;
    padding: 0 15px;
    color: #777;
  }

  blockquote>:first-child {
    margin-top: 0px;
  }

  blockquote>:last-child {
    margin-bottom: 0px;
  }

  /* HORIZONTAL RULES
  =============================================================================*/

  hr {
    clear: both;
    margin: 15px 0;
    height: 0px;
    overflow: hidden;
    border: none;
    background: transparent;
    border-bottom: 2px dotted #777;
    padding: 0;
  }

  /* TABLES
  =============================================================================*/

    table {                                     
       box-shadow: 0px 0px 15px rgb(0 0 0 / 15%);
       display: inline-block;
       width: auto;
    }

  table th {
    font-weight: bold;
  }

  table th, table td {
    border: 1px solid #ccc;
    padding: 6px 13px;
    font-size: 1rem;
  }

  table tr {
    border-top: 1px solid #ccc;
    background-color: #fff;
  }

  table tr:nth-child(2n) {
    background-color: #f8f8f8;
  }

  /* IMAGES
  =============================================================================*/

  img {
    max-width: 100%
  }

    .footnote-back, .footnote-ref {
      color: #4493f8 !important; /* blue */
    }
    .footnote-ref, .footnote-ref::after {
      font-size: 0.95em;
      font-weight: 700;
      vertical-align: super; 
    }
    .footnote-ref::after {
      content:")";
    }
    .footnotes-end-of-document  {
      font-size: 0.85em;  
    }

    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 1.5em;
      margin: 0 0.8em 0.2em -1.8em;
      vertical-align: middle;
    }

    .note, .tip, .warning { 
      border-left-style: solid;
      border-left-width: 3px;
      padding-left: 7px;
    }
    div.title {
      font-size: 0.85em;
      font-weight: bold;
    }
    div.title > p::before{
       content: '#';
       width: 1em; 
       height: 1em; 
       display: inline-block; 
    }



    .note > .title {
       color: #4493f8; /* blue */
    }   
    .tip > .title {
       color: #3fb950; /* green */
    }
    .warning > .title {
       color: #d29922 /* olive */;
    }
    .note  {
       border-color: #4493f8; /* blue */
    }
    .tip  {
       border-color: #3fb950; /* green */ 
    }
    .warning {
       border-color: #d29922 /* olive */; 
    }


  #TOC {
     font-family: Opinion Pro;
     font-weight: bold;
     font-size: 0.9em;
     padding-left: 1em;
     padding: .2em 0 .2em 1.0em;
     background: #f7f7f7;
     border: dashed 1px rgb(128,128,128); /* grey */
     box-shadow: 0px 0px 0.8em rgb(0 0 0 / 25%);
  }

    figure {
      margin: 0.3em 0 0.9em;
      background-color: #eee;
  /*  text-align: center; */
      box-shadow: 0px 0px 0.8em rgb(0 0 0 / 25%);
      border: dashed 1px rgb(128,128,128); /* grey */
    }

    figcaption {
      font-family: Iosevka, Bitter;
      font-style: italic;
      font-size: 95%;
      background-color: #eee;
      color: #000;
      padding: 0em 1em .2em;
      margin: 0;
    }

    figure:hover{
      background: #fff;
    }

    figure:hover figcaption {
      background: #fff;
    }


  -->
  </style>



      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/python/python.min.js"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/yonce.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/display/panel.min.js" integrity="sha512-kS6L87i8KUuHFk6QTxAyZSp1xza7zuaDg1Mt9rjQXjRQyraT0oqEeVbC6No/pxNvE1dMAZYBQ5r/8GZQUowhnw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/display/fullscreen.min.js" integrity="sha512-8Rk4wB3MfgQfuOw95XW/vAU8PSTHWI5HddVRXfg+Ykk8CzsiOZkDpxVSrnYq2u/IqO499ooZ61fFHppuzB2ghA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/display/fullscreen.min.css" integrity="sha512-T8xB3MmwpA77VK9lUH3UkdUTnkmpqOxHF8OceOKaHrvpcXMSNX0xtpa9FoLTDAVO1JnB2UiMdVeI2V0HTHjTWA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

      <style>
          .container {
              width: 100%;
              max-width: 800px;
              margin: 20px auto;
              font-family: Arial, sans-serif;
          }
          
          .code-block {
              position: relative;
              background: white;
              background: #2c2c2c; /* цвет рамки вокруг кода #263238 material */ 
              border: 1px solid #ddd; 
              border-radius: 4px;
              padding: 10px;  /* толщина рамки вокруг кода */
              margin-bottom: 0px;
          }
          
          .code-textarea {
              width: 98%;
              height: 400px;
              margin-top: 35px;
              font-family: Iosevka, monospace;
              padding: 10px;
              border: 1px solid #ccc; 
              border-radius: 4px; 
              resize: vertical;
          }
          
          .run-button {
              position: absolute;
              bottom: 25px;
              right: 30px;
              padding: 6px 10px 2px;
              background: #000;   /* для светлой темы */
              color: #fff;
              background: #fff;   /* для темной темы */
              color: #000;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              opacity: 0.4;
              z-index: 10;
          }
          
          .run-button:hover {
              opacity: 1.0;
          }
  	.run-button:disabled {
              animation: pulse 1.0s infinite;
          }                     

  @keyframes pulse {
      0% {
          transform: scale(1);
          opacity: 1;
      }
      50% {
          transform: scale(1.05);
          opacity: 0.7;
      }
      100% {
          transform: scale(1);
          opacity: 1;
      }
  }
                 
          .hide-button {
              position: absolute;
              top: 10px;
              right: 10px;
              padding: 8px 10px;
              background: white;
              color: black;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              opacity: 0.4;
              z-index: 10;
          }

          .hide-button:hover {
              opacity: 1.0;
          }

          .output-block {
              display: none; 
              background: #fafafa;
              border: 1px solid #ddd;
              border-radius: 4px;
              padding: 20px;
              position: relative;
          }
          
          .code-label,
          .output-label {
              position: absolute;
              color: #999;
              font-size: 0.8em;
              border: 1px #DDD solid;
              background: #F5F5F5;
              padding: 2px 4px;
              border-radius: 4px;
              font-weight: bold;
              z-index: 10;
          }
          .output-label {
              top: 10px;
              left: 10px;
          }
          .code-label{
              top: 10px;
              right: 25px;
          }
          
          .output {
              margin-top: 25px;
              font-family: Iosevka, monospace;
              white-space: pre-wrap;
          }                       

         .cm-s-default {
              height: 100px;
         }
         .CodeMirror {
              font-family: Iosevka, monospace; 
              font-size: 0.95em;
         }
      </style>


      <script src="https://cdn.jsdelivr.net/pyodide/v0.27.2/full/pyodide.js" id="pyodide" defer></script>

      <script>
          let editors = [];
          let pyodideReadyPromise;
          
          document.getElementById("pyodide").onload = function() {
              async function initPyodide() {
                  const pyodide = await loadPyodide();
                  await pyodide.loadPackage("micropip");
                  const micropip = pyodide.pyimport("micropip");
                  //await micropip.install('scipy')
                  //let scipy = await pyodide.loadPackage('scipy')
                  // see https://pyodide.org/en/stable/usage/loading-packages.html
                  return pyodide;
              }
              pyodideReadyPromise = initPyodide();

              // Get all Python code blocks
              const codeBlocks = document.querySelectorAll("pre code.language-py");
              
              codeBlocks.forEach((el, index) => {
                  const preEl = el.parentNode;
                  const blockId = index + 1;
                  const str = el.innerText.trim();
                  const lines = str.split('\n').length;                
                  const height = el.getAttribute('height') || (lines * 25 + 4) + 'px'; 
                  const div = document.createElement("div");
                  div.innerHTML = `
                      <div class="container">
                          <div class="code-block">
                              <!-- <span class="code-label">Try to edit and run code example</span> -->
                              <button class="run-button" onclick="runPython(${blockId})" id="button${blockId}">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                      <path d="M8 5v14l11-7z"> </path> 
                                  </svg>
                              </button>
                              <textarea id="code${blockId}" class="code-textarea">${str}</textarea>
                          </div>
                          <div id="output-block${blockId}" class="output-block">
                              <span class="output-label">Output:</span>
                              <div id="output${blockId}" class="output"></div>

                              <button class="hide-button" onclick="hideOutput(${blockId})">
  				<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="undefined"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
  			    </button>
                          </div>
                      </div>
                  `;
                  
                  preEl.parentNode.insertBefore(div, preEl);
                  preEl.parentNode.removeChild(preEl);
                  
                  // Initialize CodeMirror for this instance
                  setTimeout(() => {
                      const textarea = document.getElementById(`code${blockId}`);
                      if (textarea) {
                          editors[blockId] = CodeMirror.fromTextArea(textarea, {
                              mode: "python",
                            //  lineNumbers: true,
                              theme: "default",
                              theme: "material",
                              theme: "mbo", 
                              theme: "neat",
                              theme: "yonce",
                              extraKeys: {
          			"F7": function(cm) {
  			          cm.setOption("fullScreen", !cm.getOption("fullScreen"));
          			},
          			"Esc": function(cm) {
            			  if (cm.getOption("fullScreen")) cm.setOption("fullScreen", false);
          			}
        			    } 
                          });
                          editors[blockId].setSize(null, height);
                      }
                  }, 0);
              });
          };

          async function hideOutput(blockId) {
              const outputBlock = document.getElementById(`output-block${blockId}`);
              outputBlock.style.display = 'none';
          }

          async function runPython(blockId) {
              let pyodide = await pyodideReadyPromise;
              try {
                  const outputDiv = document.getElementById(`output${blockId}`);
                  const outputBlock = document.getElementById(`output-block${blockId}`);
                  const runButton = document.getElementById(`button${blockId}`);
                  
                  outputBlock.style.display = 'block';

                  let output = "";
                  pyodide.globals.set("print", (...args) => {
                     output += args.join(" ") + "\n";
                  });

                  runButton.disabled = true;
                  
                  await pyodide.runPythonAsync(editors[blockId].getValue());
                  
                  runButton.disabled = false;
                  outputDiv.innerText = output;
              } catch(err) {
                  document.getElementById(`button${blockId}`).disabled = false;
                  document.getElementById(`output${blockId}`).innerText = "Error: " + err;
              }
          }
      </script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">5</h1>
</header>
<h1 id="dictionary-comparison-in-python">Dictionary Comparison in
Python</h1>
<p>When you start working with Python dictionaries, one common task
you'll encounter is comparing two dictionaries to understand their
differences.</p>
<p>While comparing simple data types like integers or strings is
straightforward, dictionary comparison presents unique challenges due to
their complex nature and nested structures. This section explores
various methods and best practices for comparing dictionaries in Python,
from basic equality checks to deep comparison.</p>
<h2 id="practical-example">Practical Example</h2>
<p>Picture yourself building a student management system where you need
to track changes in student records. Each student's information is
stored in a dictionary, and you want to know exactly what changed
between two versions of their data.</p>
<p>Our comparison function works like a detective investigating the
differences between two dictionaries. It examines both dictionaries
thoroughly and creates a detailed report of what it finds. Think of it
as comparing two versions of the same document - you want to know what
was added, what was removed, and what was modified.</p>
<p>The function starts by looking at the most basic question: are these
dictionaries exactly the same? It uses Python's built-in equality
operator (==) to check this. However, it doesn't stop there. Just like a
thorough detective, it digs deeper to find specific differences that
might be important to know about.</p>
<pre><code class="language-py" height="330px">
from typing import Dict, Any
from collections import Counter

def compare_dictionaries(dict1: Dict[Any, Any], dict2: Dict[Any, Any]) -> Dict[str, Any]:
    """
    Compares two dictionaries and returns detailed analysis of their differences.
    
    Args:
        dict1: First dictionary to compare
        dict2: Second dictionary to compare
        
    Returns:
        Dictionary containing comparison results
    """
    results = {
        "are_identical": dict1 == dict2,
        "same_keys": set(dict1.keys()) == set(dict2.keys()),
        "only_in_dict1": set(dict1.keys()) - set(dict2.keys()),
        "only_in_dict2": set(dict2.keys()) - set(dict1.keys()),
        "common_keys": set(dict1.keys()) & set(dict2.keys()),
        "value_differences": {},
        "common_key_values": {}
    }
    
    # Compare values for common keys
    for key in results["common_keys"]:
        if dict1[key] != dict2[key]:
            results["value_differences"][key] = {
                "dict1_value": dict1[key],
                "dict2_value": dict2[key]
            }
        else:
            results["common_key_values"][key] = dict1[key]
    
    return results

# Example usage with different scenarios
# Scenario 1: Similar dictionaries with some differences
student1 = {
    "name": "Alice",
    "age": 20,
    "grades": {"math": 95, "physics": 88},
    "active": True
}

student2 = {
    "name": "Alice",
    "age": 21,  # Different age
    "grades": {"math": 95, "physics": 88},
    "status": "enrolled"  # Different key
}

# Scenario 2: Nested dictionaries
product1 = {
    "id": "P123",
    "details": {
        "color": "blue",
        "size": "M",
        "stock": 50
    }
}

product2 = {
    "id": "P123",
    "details": {
        "color": "red",
        "size": "M",
        "stock": 50
    }
}

# Compare and print results
student_comparison = compare_dictionaries(student1, student2)
print("\nStudent Dictionaries Comparison:")
print(f"Are identical: {student_comparison['are_identical']}")
print(f"Keys only in student1: {student_comparison['only_in_dict1']}")
print(f"Keys only in student2: {student_comparison['only_in_dict2']}")
print("Value differences:", student_comparison['value_differences'])

# Compare nested dictionaries
product_comparison = compare_dictionaries(product1, product2)
print("\nProduct Dictionaries Comparison:")
print(f"Are identical: {product_comparison['are_identical']}")
print("Value differences:", product_comparison['value_differences'])
</code></pre>
<p>Next, it looks at the keys in both dictionaries. Using Python's
powerful set operations, it identifies which keys are unique to each
dictionary and which keys they share in common. This is similar to
comparing two lists of items and finding out what appears in both lists
and what's unique to each list. For example, if one student record has
an 'active' status and another has 'enrolled' status, our function will
tell us about these different fields.</p>
<p>For the keys that exist in both dictionaries, the function goes one
step further. It compares the values associated with these common keys.
If it finds any differences, it records both values so you can see
exactly what changed. This is particularly useful when tracking changes
in grades, contact information, or any other student data that might be
updated over time.</p>
<p>The beauty of this code lies in its versatility. While our example
uses student records, the same function could be used to compare product
inventories, game states, configuration files, or any other data stored
in dictionary format. The function doesn't care what kind of data it's
comparing – it simply reports the differences it finds.</p>
<p>Remember, while this code might look complex at first glance, it's
really just doing what we often do mentally when comparing two things:
checking what's the same, what's different, and keeping track of those
differences in a organized way.</p>
<h2 id="using-operator">Using == operator</h2>
<p>The simplest way to compare dictionaries is using the equality
operators:</p>
<pre><code class="language-py">
dict1 = {'a': 1, 'b': 2}
dict2 = {'a': 1, 'b': 2}
print(dict1 == dict2)  # True
</code></pre>
<p>This operator checks if both dictionaries have the same keys and
values.</p>
<h2 id="using-loop">Using Loop</h2>
<p>We can use a simple loop to check each key and value. Here's how:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compare_dicts(dict1, dict2):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First, check if they have the same number of items</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(dict1) <span class="op">!=</span> <span class="bu">len</span>(dict2):</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Now check each key and value</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> dict1:</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the key exists in both dictionaries</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> key <span class="kw">not</span> <span class="kw">in</span> dict2:</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the values are the same</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> dict1[key] <span class="op">!=</span> dict2[key]:</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">True</span></span></code></pre></div>
<p>Here are some fun examples to understand how it works:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>my_pets <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;dog&quot;</span>: <span class="st">&quot;Rex&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;cat&quot;</span>: <span class="st">&quot;Whiskers&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;fish&quot;</span>: <span class="st">&quot;Nemo&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>friends_pets <span class="op">=</span> {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;dog&quot;</span>: <span class="st">&quot;Rex&quot;</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;cat&quot;</span>: <span class="st">&quot;Whiskers&quot;</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;fish&quot;</span>: <span class="st">&quot;Nemo&quot;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>different_pets <span class="op">=</span> {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;dog&quot;</span>: <span class="st">&quot;Max&quot;</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;cat&quot;</span>: <span class="st">&quot;Whiskers&quot;</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;fish&quot;</span>: <span class="st">&quot;Goldie&quot;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(compare_dicts(my_pets, friends_pets))    <span class="co"># True</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(compare_dicts(my_pets, different_pets))  <span class="co"># False</span></span></code></pre></div>
<p>Explanation:</p>
<ul>
<li><code>my_pets == friends_pets</code> evaluates to True because both
have identical key-value pairs.</li>
<li><code>my_pets == different_pets</code> evaluates to False because
the values for key 'dog' differ.</li>
</ul>
<p>Although Python provides built-in comparison operator, implementing
dictionary comparison with loops gives you granular control over the
process.</p>
<h2 id="using-the-deepdiff-library">Using the DeepDiff Library</h2>
<p>DeepDiff is specifically designed to handle deep comparisons of
complex data structures, including lists and sets.</p>
<p>While the regular dictionary comparison we learned earlier is great
for simple cases, DeepDiff is your go-to tool when things get
complex.</p>
<p>Let's see it in action with a simple example:</p>
<pre><code class="language-py">
import micropip
await micropip.install('deepdiff')

from deepdiff import DeepDiff

product1 = {
    "id": "P123",
    "details": {
        "color": "blue",
        "size": "M",
        "stock": 50
    }
}
product2 = {
    "id": "P123",
    "details": {
        "color": "red",
        "size": "M",
        "stock": 50
    }
}
diff = DeepDiff(product1, product2)
print(diff)
</code></pre>
<p>Here are some cool tricks it can do:</p>
<ul>
<li>Values that changed: "Hey, this price went from $10 to $15!"</li>
<li>Items that were added or removed: "This product got a new 'discount'
field!"</li>
<li>Dictionary keys that changed: "The 'name' field was renamed to
'title'!"</li>
<li>Type changes: "This was a number, now it's text!"</li>
</ul>
<p>You can also customize how DeepDiff works. Here are some handy
options:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ignore specific keys</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>diff <span class="op">=</span> DeepDiff(product1, product2, exclude_paths<span class="op">=</span>[<span class="st">&quot;root[&#39;details&#39;][&#39;color&#39;]&quot;</span>])</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the results in tree view</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>diff <span class="op">=</span> DeepDiff(product1, product2, view<span class="op">=</span><span class="st">&#39;tree&#39;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ignore order in lists</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>diff <span class="op">=</span> DeepDiff(product1, product2, ignore_order<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<p>DeepDiff is your best friend when you need to:</p>
<ul>
<li>Tracking changes in configuration files</li>
<li>Watch how your data changes over time</li>
<li>Compare what your API sent vs what you expected</li>
<li>Quality assurance testing</li>
<li>Data validation processes</li>
</ul>
<p>Want to learn all the amazing things DeepDiff can do? Check out the
<a href="https://zepworks.com/deepdiff/current/index.html">DeepDiff
documentation</a></p>
<h2 id="comparison-methods-for-python-dictionaries">Comparison Methods
for Python Dictionaries</h2>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>== Operator</th>
<th>Using Loop</th>
<th>DeepDiff</th>
</tr>
</thead>
<tbody>
<tr>
<td>Syntax</td>
<td><code>dict1 == dict2</code></td>
<td>requires writing loop logic</td>
<td><code>DeepDiff(dict1, dict2)</code></td>
</tr>
<tr>
<td>Speed</td>
<td>Fast</td>
<td>Moderate</td>
<td>Slower (especially for large dictionaries)</td>
</tr>
<tr>
<td>Nested Dictionary Support</td>
<td>Basic</td>
<td>Can be customized</td>
<td>Excellent built-in support</td>
</tr>
<tr>
<td>Customization</td>
<td>None</td>
<td>High (can add custom logic, partial checks)</td>
<td>Moderate (has configuration options: ignore keys, types, precision,
etc.)</td>
</tr>
<tr>
<td>Learning Curve</td>
<td>Very Easy</td>
<td>Easy</td>
<td>Moderate</td>
</tr>
<tr>
<td>External Dependencies</td>
<td>Built-in</td>
<td>Built-in</td>
<td>Requires <code>deepdiff</code> package</td>
</tr>
<tr>
<td>Detailed Differences</td>
<td>Only True/False result</td>
<td>Can be customized to show differences</td>
<td>Detailed report of all differences</td>
</tr>
<tr>
<td>Handling of Floating-Point Precision</td>
<td>No</td>
<td>Yes (custom logic)</td>
<td>Yes (configurable precision tolerance)</td>
</tr>
<tr>
<td>Output Format</td>
<td>Boolean</td>
<td>Customizable</td>
<td>Structured difference report</td>
</tr>
<tr>
<td>Best For</td>
<td>Quick equality checks</td>
<td>Learning and custom logic</td>
<td>Production and complex data</td>
</tr>
</tbody>
</table>
<h2 id="faqs-on-dictionary-comparison-in-python">FAQs on Dictionary
Comparison in Python</h2>
<h3 id="how-do-i-compare-two-dictionaries-for-equality">How do I compare
two dictionaries for equality?</h3>
<p>You can use the == operator to check if two dictionaries have the
same keys and values:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dict1 <span class="op">==</span> dict2</span></code></pre></div>
<h3 id="how-does-python-check-if-two-dictionaries-are-equal">How does
Python check if two dictionaries are equal?</h3>
<p>Python compares the key-value pairs of each dictionary. Two
dictionaries are considered equal if they have the same keys, and each
key is associated with the same value in both. The order of key
insertion does not affect this comparison.</p>
<h3 id="how-can-i-check-if-one-dictionary-is-a-subset-of-another">How
can I check if one dictionary is a subset of another?</h3>
<p>Use dictionary comprehension with the &lt;= operator:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>is_subset <span class="op">=</span> dict1.items() <span class="op">&lt;=</span> dict2.items() </span></code></pre></div>
<h3 id="how-can-i-compare-only-the-keys-of-two-dictionaries">How can I
compare only the keys of two dictionaries?</h3>
<p>You can compare the sets of keys directly, such as</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span>(dict1.keys()) <span class="op">==</span> <span class="bu">set</span>(dict2.keys())</span></code></pre></div>
<p>This approach checks if both dictionaries contain exactly the same
keys.</p>
<h3
id="what-is-the-difference-between-and-is-when-comparing-dictionaries">What
is the difference between == and is when comparing dictionaries?</h3>
<p>The == operator checks if two dictionaries have the same content,
while <strong>is</strong> checks if they are the same object in
memory:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>dict1 <span class="op">==</span> dict2  <span class="co"># Compares values</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>dict1 <span class="kw">is</span> dict2  <span class="co"># Compares memory addresses</span></span></code></pre></div>
<h3 id="how-do-i-find-the-differences-between-two-dictionaries">How do I
find the differences between two dictionaries?</h3>
<p>You can use set operations on <code>items()</code>:</p>
<pre><code class="language-py">
product1 = {
    "id": "P123",
    "color": "blue",
    "size": "M",
    "stock": 50
}
product2 = {
    "id": "P123",
    "color": "red",
    "size": "M",
    "stock": 25
}
diff = product1.items() ^ product2.items()
print(diff)
</code></pre>
<p>This approach will not work for nested dictionaries, as in Python
dictionaries are mutable and, therefore, cannot be elements of a set. To
correctly compare nested dictionaries, you need to use recursion or
special libraries such as deepdiff.</p>
<h3 id="can-i-compare-dictionaries-based-on-specific-keys-only">Can I
compare dictionaries based on specific keys only?</h3>
<p>Yes, you can filter the dictionaries before comparison:</p>
<pre><code class="language-py">
dict1 = {
    "id": "P123",
    "color": "blue",
    "size": "M",
    "stock": 50
}
dict2 = {
    "id": "P123",
    "color": "red",
    "size": "M",
    "stock": 25
}
keys_to_compare = {"id", "size"}
filtered1 = {k: dict1[k] for k in keys_to_compare if k in dict1}
filtered2 = {k: dict2[k] for k in keys_to_compare if k in dict2}
print(filtered1 == filtered2)
</code></pre>
</body>
</html>
